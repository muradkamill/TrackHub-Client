<div class="container mx-auto p-6 max-w-lg bg-stone-500">
  <h1 class="text-2xl font-semibold mb-4 text-center text-white">
    Rate Your Order
  </h1>
  <p class="text-gray-200 text-center mb-6">
    Thank you for your purchase! Please rate your experience with this product.
  </p>

  <div class="border border-stone-500 rounded-lg p-5 bg-stone-700 shadow">
    <div class="text-center mb-4">
      <img
        src="https://localhost:7115{{product?.ImageUrls[0]}}"
        alt="Product"
        class="mx-auto w-40 h-40 object-cover rounded"
      />
      <h2 class="mt-3 text-lg font-medium text-white">{{product?.Name}}</h2>
    </div>

<div class="flex justify-center gap-2 mb-4">
  @for (i of [1, 2, 3, 4, 5]; track i) {
    <div class="relative w-8 h-8 hover:bg-amber-600 cursor-pointer rounded">
      <img
        src="{{ getStarImage(i) }}"
        alt="{{ i }} star"
        class="absolute top-0 left-0 w-8 h-8 object-cover pointer-events-none"
      />
      <div
        class="absolute top-0 left-0 w-1/2 h-full cursor-pointer"
        (click)="setRate(i - 0.5)"
      ></div>
      <div
        class="absolute top-0 right-0 w-1/2 h-full cursor-pointer"
        (click)="setRate(i)"
      ></div>
    </div>
  }
  @if(rateIsEmpty){


  }
</div>

    <textarea
      rows="4"
      placeholder="Write your feedback..."
      class="w-full border rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-600 resize-none bg-stone-700 text-white"
      #comment
    ></textarea>

    <button
      class="mt-4 w-full py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-md font-medium transition"
      (click)="onSubmitRate(comment.value)"
    >
      Submit Rating
    </button>

    @if (rateIsEmpty) {
      <div
        class="mt-3 flex items-center gap-2 text-red-400 bg-stone-600/opacity-20 border border-red-400 px-4 py-3 rounded-md"
      >
        <img src="error.svg" alt="Error" class="w-5 h-5" />
        <span class="text-sm font-medium">Please select a rating before submitting.</span>
      </div>
    }

    @if (isRated) {
    <div
      class="mt-4 flex items-center gap-2 text-green-600 bg-green-600/10 border border-green-200 px-4 py-3 rounded-md"
    >
      <img src="check.svg" alt="Success" class="w-5 h-5" />
      <span class="text-sm font-medium">Thank you for your rating!</span>
    </div>
    }
  </div>
</div>
